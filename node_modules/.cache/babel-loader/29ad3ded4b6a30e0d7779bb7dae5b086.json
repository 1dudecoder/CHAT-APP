{"ast":null,"code":"import _slicedToArray from\"D:/my react project/pp/ChatAPP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Grid from\"@material-ui/core/Grid\";import{makeStyles}from\"@material-ui/core/styles\";import Avatar from\"@material-ui/core/Avatar\";import{deepPurple}from\"@material-ui/core/colors\";import IconButton from\"@material-ui/core/IconButton\";import{AiFillLike}from\"react-icons/ai\";import{AiFillFire}from\"react-icons/ai\";import{AiFillHeart}from\"react-icons/ai\";import{AiFillDelete}from\"react-icons/ai\";import{db}from\"../Firebase/Firebase\";import{useParams}from\"react-router-dom\";import DeleteModal from\"./DeleteModal\";import{Anchorme}from\"react-anchorme\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{flexGrow:1,position:\"relative\",padding:\"8px\"},paper:{padding:\"10px\",\"&:hover\":{backgroundColor:\"#1f2436\"}},avatar:{display:\"inline-block\",verticalAlign:\"top\"},chat:{display:\"inline-block\",paddingLeft:\"1rem\",width:\"calc(100% - 50px)\"},chatHeading:{marginBlockStart:0,marginBlockEnd:0,display:\"inline-block\",fontSize:\"1rem\",fontWeight:\"600\",color:\"white\"},chatTimming:{marginBlockStart:0,marginBlockEnd:0,display:\"inline-block\",paddingLeft:\"0.5em\",color:\"white\"},chatText:{color:\"#dcddde\"},purple:{color:theme.palette.getContrastText(deepPurple[500]),backgroundColor:\"#3f51b5\"},emojiDiv:{position:\"absolute\",right:0,top:0},emojiDivInner:{position:\"absolute\",right:0,padding:\"0 35px 0 32px\"},emojiBtn:{fontSize:\"1.1rem\",color:\"rgb(255 195 54)\"},allEmoji:{backgroundColor:\"#2d2e31ba\",borderRadius:\"5px\",paddingLeft:\"2px\",paddingRight:\"2px\",display:\"flex\"},countEmojiBtn:{padding:\"3px\",borderRadius:\"4px\",fontSize:\"0.8em\",backgroundColor:\"#ffffff4a\",color:\"#cacaca\",paddingLeft:\"5px\",paddingRight:\"5px\",\"&:hover\":{backgroundColor:\"#ffffff4a\",color:\"#e7e7e7\"}}};});function Messages(_ref){var values=_ref.values,msgId=_ref.msgId;var _useState=useState({display:\"none\"}),_useState2=_slicedToArray(_useState,2),style=_useState2[0],setStyle=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteModal=_useState4[0],setDeleteModal=_useState4[1];var classes=useStyles();var uid=JSON.parse(localStorage.getItem(\"userDetails\")).uid;var messegerUid=values.uid;var date=values.timestamp.toDate();var day=date.getDate();var year=date.getFullYear();var month=date.getMonth();var hour=date.getHours();var minute=date.getMinutes();var time=\"\".concat(day,\"/\").concat(month,\"/\").concat(year,\"   \").concat(hour,\":\").concat(minute);var numLikes=values.likeCount;var numFire=values.fireCount;var numHeart=values.heartCount;var userLiked=values.likes[uid];var userFire=values.fire[uid];var userHeart=values.heart[uid];var postImg=values.postImg;var channelId=useParams().id;var selectedLike=userLiked?{color:\"#8ff879\",backgroundColor:\"#545454\"}:null;var selectedHeart=userHeart?{color:\"#ff527d\",backgroundColor:\"#545454\"}:null;var selectedFire=userFire?{color:\"#ffc336\",backgroundColor:\"#545454\"}:null;var showDeleteModal=function showDeleteModal(){setDeleteModal(!deleteModal);};var heartClick=function heartClick(){var messageDoc=db.collection(\"channels\").doc(channelId).collection(\"messages\").doc(msgId);if(userHeart){return db.runTransaction(function(transaction){// This code may get re-run multiple times if there are conflicts.\nreturn transaction.get(messageDoc).then(function(doc){if(!doc){console.log(\"doc not found\");return;}var newHeartCount=doc.data().heartCount-1;var newHeart=doc.data().heart?doc.data().heart:{};newHeart[uid]=false;transaction.update(messageDoc,{heartCount:newHeartCount,heart:newHeart});});}).then(function(){console.log(\"Disiked\");}).catch(function(error){console.log(error);});}else{return db.runTransaction(function(transaction){// This code may get re-run multiple times if there are conflicts.\nreturn transaction.get(messageDoc).then(function(doc){if(!doc){console.log(\"doc not found\");return;}var newHeartCount=doc.data().heartCount+1;var newHeart=doc.data().heart?doc.data().heart:{};newHeart[uid]=true;transaction.update(messageDoc,{heartCount:newHeartCount,heart:newHeart});});}).then(function(){console.log(\"Liked\");}).catch(function(error){console.log(error);});}};var fireClick=function fireClick(){var messageDoc=db.collection(\"channels\").doc(channelId).collection(\"messages\").doc(msgId);if(userFire){return db.runTransaction(function(transaction){// This code may get re-run multiple times if there are conflicts.\nreturn transaction.get(messageDoc).then(function(doc){if(!doc){console.log(\"doc not found\");return;}var newFireCount=doc.data().fireCount-1;var newFire=doc.data().fire?doc.data().fire:{};newFire[uid]=false;transaction.update(messageDoc,{fireCount:newFireCount,fire:newFire});});}).then(function(){console.log(\"Disiked\");}).catch(function(error){console.log(error);});}else{return db.runTransaction(function(transaction){// This code may get re-run multiple times if there are conflicts.\nreturn transaction.get(messageDoc).then(function(doc){if(!doc){console.log(\"doc not found\");return;}var newFireCount=doc.data().fireCount+1;var newFire=doc.data().fire?doc.data().fire:{};newFire[uid]=true;transaction.update(messageDoc,{fireCount:newFireCount,fire:newFire});});}).then(function(){console.log(\"Liked\");}).catch(function(error){console.log(error);});}};var likeClick=function likeClick(){var messageDoc=db.collection(\"channels\").doc(channelId).collection(\"messages\").doc(msgId);if(userLiked){return db.runTransaction(function(transaction){// This code may get re-run multiple times if there are conflicts.\nreturn transaction.get(messageDoc).then(function(doc){if(!doc){console.log(\"doc not found\");return;}var newLikeCount=doc.data().likeCount-1;var newLikes=doc.data().likes?doc.data().likes:{};newLikes[uid]=false;transaction.update(messageDoc,{likeCount:newLikeCount,likes:newLikes});});}).then(function(){console.log(\"Disiked\");}).catch(function(error){console.log(error);});}else{return db.runTransaction(function(transaction){// This code may get re-run multiple times if there are conflicts.\nreturn transaction.get(messageDoc).then(function(doc){if(!doc){console.log(\"doc not found\");return;}var newLikeCount=doc.data().likeCount+1;var newLikes=doc.data().likes?doc.data().likes:{};newLikes[uid]=true;transaction.update(messageDoc,{likeCount:newLikeCount,likes:newLikes});});}).then(function(){console.log(\"Liked\");}).catch(function(error){console.log(error);});}};var deleteMsg=function deleteMsg(id){db.collection(\"channels\").doc(channelId).collection(\"messages\").doc(id).delete().then(function(res){console.log(\"deleted successfully\");}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,className:classes.root,children:[deleteModal?/*#__PURE__*/_jsx(DeleteModal,{msgId:msgId,text:values.text,postImg:postImg,deleteMsg:deleteMsg,handleModal:showDeleteModal}):null,/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,onMouseEnter:function onMouseEnter(e){setStyle({display:\"block\"});},onMouseLeave:function onMouseLeave(e){setStyle({display:\"none\"});},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.avatar,children:/*#__PURE__*/_jsx(Avatar,{alt:values.userName,src:values.userImg,className:classes.purple})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.chat,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:classes.chatHeading,children:values.userName}),/*#__PURE__*/_jsx(\"p\",{className:classes.chatTimming,children:time})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.chatText,children:values.text.split(\"\\n\").map(function(txt,idx){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Anchorme,{target:\"_blank\",rel:\"noreferrer noopener\",children:txt})},idx);})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,style:{paddingTop:\"5px\"},children:postImg?/*#__PURE__*/_jsx(\"img\",{src:postImg,alt:\"user\",style:{height:\"30vh\",width:\"auto\",borderRadius:\"4px\"}}):null}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"5px\",display:\"flex\"},children:[numLikes>0?/*#__PURE__*/_jsx(\"div\",{style:{padding:\"3px\"},children:/*#__PURE__*/_jsxs(IconButton,{component:\"span\",onClick:likeClick,className:classes.countEmojiBtn,style:selectedLike,children:[/*#__PURE__*/_jsx(AiFillLike,{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"2px\"},children:numLikes})]})}):null,numFire>0?/*#__PURE__*/_jsx(\"div\",{style:{padding:\"3px\"},children:/*#__PURE__*/_jsxs(IconButton,{component:\"span\",onClick:fireClick,className:classes.countEmojiBtn,style:selectedFire,children:[/*#__PURE__*/_jsx(AiFillFire,{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"2px\"},children:numFire})]})}):null,numHeart>0?/*#__PURE__*/_jsx(\"div\",{style:{padding:\"3px\"},children:/*#__PURE__*/_jsxs(IconButton,{component:\"span\",onClick:heartClick,className:classes.countEmojiBtn,style:selectedHeart,children:[/*#__PURE__*/_jsx(AiFillHeart,{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"2px\"},children:numHeart})]})}):null]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.emojiDiv,style:style,children:/*#__PURE__*/_jsx(\"div\",{className:classes.emojiDivInner,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.allEmoji,children:[/*#__PURE__*/_jsx(IconButton,{component:\"span\",style:{padding:\"4px\"},onClick:likeClick,children:/*#__PURE__*/_jsx(AiFillLike,{className:classes.emojiBtn})}),/*#__PURE__*/_jsx(IconButton,{component:\"span\",style:{padding:\"4px\"},onClick:fireClick,children:/*#__PURE__*/_jsx(AiFillFire,{className:classes.emojiBtn})}),/*#__PURE__*/_jsx(IconButton,{component:\"span\",style:{padding:\"4px\"},onClick:heartClick,children:/*#__PURE__*/_jsx(AiFillHeart,{className:classes.emojiBtn})}),uid===messegerUid?/*#__PURE__*/_jsx(IconButton,{component:\"span\",style:{padding:\"4px\"},onClick:showDeleteModal,children:/*#__PURE__*/_jsx(AiFillDelete,{className:classes.emojiBtn,color:\"#c3c3c3f0\"})}):null]})})})]})]});}export default Messages;","map":{"version":3,"sources":["D:/my react project/pp/ChatAPP/src/Components/Messages.js"],"names":["React","useState","Grid","makeStyles","Avatar","deepPurple","IconButton","AiFillLike","AiFillFire","AiFillHeart","AiFillDelete","db","useParams","DeleteModal","Anchorme","useStyles","theme","root","flexGrow","position","padding","paper","backgroundColor","avatar","display","verticalAlign","chat","paddingLeft","width","chatHeading","marginBlockStart","marginBlockEnd","fontSize","fontWeight","color","chatTimming","chatText","purple","palette","getContrastText","emojiDiv","right","top","emojiDivInner","emojiBtn","allEmoji","borderRadius","paddingRight","countEmojiBtn","Messages","values","msgId","style","setStyle","deleteModal","setDeleteModal","classes","uid","JSON","parse","localStorage","getItem","messegerUid","date","timestamp","toDate","day","getDate","year","getFullYear","month","getMonth","hour","getHours","minute","getMinutes","time","numLikes","likeCount","numFire","fireCount","numHeart","heartCount","userLiked","likes","userFire","fire","userHeart","heart","postImg","channelId","id","selectedLike","selectedHeart","selectedFire","showDeleteModal","heartClick","messageDoc","collection","doc","runTransaction","transaction","get","then","console","log","newHeartCount","data","newHeart","update","catch","error","fireClick","newFireCount","newFire","likeClick","newLikeCount","newLikes","deleteMsg","delete","res","err","text","e","userName","userImg","split","map","txt","idx","paddingTop","height"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { deepPurple } from \"@material-ui/core/colors\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { AiFillLike } from \"react-icons/ai\";\r\nimport { AiFillFire } from \"react-icons/ai\";\r\nimport { AiFillHeart } from \"react-icons/ai\";\r\nimport { AiFillDelete } from \"react-icons/ai\";\r\nimport { db } from \"../Firebase/Firebase\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport DeleteModal from \"./DeleteModal\";\r\nimport { Anchorme } from \"react-anchorme\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    position: \"relative\",\r\n    padding: \"8px\",\r\n  },\r\n  paper: {\r\n    padding: \"10px\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#1f2436\",\r\n    },\r\n  },\r\n  avatar: {\r\n    display: \"inline-block\",\r\n    verticalAlign: \"top\",\r\n  },\r\n  chat: {\r\n    display: \"inline-block\",\r\n    paddingLeft: \"1rem\",\r\n    width: \"calc(100% - 50px)\",\r\n  },\r\n  chatHeading: {\r\n    marginBlockStart: 0,\r\n    marginBlockEnd: 0,\r\n    display: \"inline-block\",\r\n    fontSize: \"1rem\",\r\n    fontWeight: \"600\",\r\n    color: \"white\",\r\n  },\r\n  chatTimming: {\r\n    marginBlockStart: 0,\r\n    marginBlockEnd: 0,\r\n    display: \"inline-block\",\r\n    paddingLeft: \"0.5em\",\r\n    color: \"white\",\r\n  },\r\n  chatText: {\r\n    color: \"#dcddde\",\r\n  },\r\n  purple: {\r\n    color: theme.palette.getContrastText(deepPurple[500]),\r\n    backgroundColor: \"#3f51b5\",\r\n  },\r\n  emojiDiv: {\r\n    position: \"absolute\",\r\n    right: 0,\r\n    top: 0,\r\n  },\r\n  emojiDivInner: {\r\n    position: \"absolute\",\r\n    right: 0,\r\n    padding: \"0 35px 0 32px\",\r\n  },\r\n  emojiBtn: {\r\n    fontSize: \"1.1rem\",\r\n    color: \"rgb(255 195 54)\",\r\n  },\r\n  allEmoji: {\r\n    backgroundColor: \"#2d2e31ba\",\r\n    borderRadius: \"5px\",\r\n    paddingLeft: \"2px\",\r\n    paddingRight: \"2px\",\r\n    display: \"flex\",\r\n  },\r\n  countEmojiBtn: {\r\n    padding: \"3px\",\r\n    borderRadius: \"4px\",\r\n    fontSize: \"0.8em\",\r\n    backgroundColor: \"#ffffff4a\",\r\n    color: \"#cacaca\",\r\n    paddingLeft: \"5px\",\r\n    paddingRight: \"5px\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#ffffff4a\",\r\n      color: \"#e7e7e7\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction Messages({ values, msgId }) {\r\n  const [style, setStyle] = useState({ display: \"none\" });\r\n  const [deleteModal, setDeleteModal] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const uid = JSON.parse(localStorage.getItem(\"userDetails\")).uid;\r\n  const messegerUid = values.uid;\r\n  const date = values.timestamp.toDate();\r\n  const day = date.getDate();\r\n  const year = date.getFullYear();\r\n  const month = date.getMonth();\r\n  const hour = date.getHours();\r\n  const minute = date.getMinutes();\r\n  const time = `${day}/${month}/${year}   ${hour}:${minute}`;\r\n\r\n  const numLikes = values.likeCount;\r\n  const numFire = values.fireCount;\r\n  const numHeart = values.heartCount;\r\n\r\n  const userLiked = values.likes[uid];\r\n  const userFire = values.fire[uid];\r\n  const userHeart = values.heart[uid];\r\n\r\n  const postImg = values.postImg;\r\n\r\n  const channelId = useParams().id;\r\n\r\n  const selectedLike = userLiked\r\n    ? { color: \"#8ff879\", backgroundColor: \"#545454\" }\r\n    : null;\r\n\r\n  const selectedHeart = userHeart\r\n    ? { color: \"#ff527d\", backgroundColor: \"#545454\" }\r\n    : null;\r\n\r\n  const selectedFire = userFire\r\n    ? { color: \"#ffc336\", backgroundColor: \"#545454\" }\r\n    : null;\r\n\r\n  const showDeleteModal = () => {\r\n    setDeleteModal(!deleteModal);\r\n  };\r\n\r\n  const heartClick = () => {\r\n    const messageDoc = db\r\n      .collection(\"channels\")\r\n      .doc(channelId)\r\n      .collection(\"messages\")\r\n      .doc(msgId);\r\n    if (userHeart) {\r\n      return db\r\n        .runTransaction((transaction) => {\r\n          // This code may get re-run multiple times if there are conflicts.\r\n          return transaction.get(messageDoc).then((doc) => {\r\n            if (!doc) {\r\n              console.log(\"doc not found\");\r\n              return;\r\n            }\r\n\r\n            let newHeartCount = doc.data().heartCount - 1;\r\n            let newHeart = doc.data().heart ? doc.data().heart : {};\r\n            newHeart[uid] = false;\r\n\r\n            transaction.update(messageDoc, {\r\n              heartCount: newHeartCount,\r\n              heart: newHeart,\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          console.log(\"Disiked\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      return db\r\n        .runTransaction((transaction) => {\r\n          // This code may get re-run multiple times if there are conflicts.\r\n          return transaction.get(messageDoc).then((doc) => {\r\n            if (!doc) {\r\n              console.log(\"doc not found\");\r\n              return;\r\n            }\r\n\r\n            let newHeartCount = doc.data().heartCount + 1;\r\n            let newHeart = doc.data().heart ? doc.data().heart : {};\r\n            newHeart[uid] = true;\r\n\r\n            transaction.update(messageDoc, {\r\n              heartCount: newHeartCount,\r\n              heart: newHeart,\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          console.log(\"Liked\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const fireClick = () => {\r\n    const messageDoc = db\r\n      .collection(\"channels\")\r\n      .doc(channelId)\r\n      .collection(\"messages\")\r\n      .doc(msgId);\r\n    if (userFire) {\r\n      return db\r\n        .runTransaction((transaction) => {\r\n          // This code may get re-run multiple times if there are conflicts.\r\n          return transaction.get(messageDoc).then((doc) => {\r\n            if (!doc) {\r\n              console.log(\"doc not found\");\r\n              return;\r\n            }\r\n\r\n            let newFireCount = doc.data().fireCount - 1;\r\n            let newFire = doc.data().fire ? doc.data().fire : {};\r\n            newFire[uid] = false;\r\n\r\n            transaction.update(messageDoc, {\r\n              fireCount: newFireCount,\r\n              fire: newFire,\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          console.log(\"Disiked\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      return db\r\n        .runTransaction((transaction) => {\r\n          // This code may get re-run multiple times if there are conflicts.\r\n          return transaction.get(messageDoc).then((doc) => {\r\n            if (!doc) {\r\n              console.log(\"doc not found\");\r\n              return;\r\n            }\r\n\r\n            let newFireCount = doc.data().fireCount + 1;\r\n            let newFire = doc.data().fire ? doc.data().fire : {};\r\n            newFire[uid] = true;\r\n\r\n            transaction.update(messageDoc, {\r\n              fireCount: newFireCount,\r\n              fire: newFire,\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          console.log(\"Liked\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const likeClick = () => {\r\n    const messageDoc = db\r\n      .collection(\"channels\")\r\n      .doc(channelId)\r\n      .collection(\"messages\")\r\n      .doc(msgId);\r\n    if (userLiked) {\r\n      return db\r\n        .runTransaction((transaction) => {\r\n          // This code may get re-run multiple times if there are conflicts.\r\n          return transaction.get(messageDoc).then((doc) => {\r\n            if (!doc) {\r\n              console.log(\"doc not found\");\r\n              return;\r\n            }\r\n\r\n            let newLikeCount = doc.data().likeCount - 1;\r\n            let newLikes = doc.data().likes ? doc.data().likes : {};\r\n            newLikes[uid] = false;\r\n\r\n            transaction.update(messageDoc, {\r\n              likeCount: newLikeCount,\r\n              likes: newLikes,\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          console.log(\"Disiked\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      return db\r\n        .runTransaction((transaction) => {\r\n          // This code may get re-run multiple times if there are conflicts.\r\n          return transaction.get(messageDoc).then((doc) => {\r\n            if (!doc) {\r\n              console.log(\"doc not found\");\r\n              return;\r\n            }\r\n\r\n            let newLikeCount = doc.data().likeCount + 1;\r\n            let newLikes = doc.data().likes ? doc.data().likes : {};\r\n            newLikes[uid] = true;\r\n\r\n            transaction.update(messageDoc, {\r\n              likeCount: newLikeCount,\r\n              likes: newLikes,\r\n            });\r\n          });\r\n        })\r\n        .then(() => {\r\n          console.log(\"Liked\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const deleteMsg = (id) => {\r\n    db.collection(\"channels\")\r\n      .doc(channelId)\r\n      .collection(\"messages\")\r\n      .doc(id)\r\n      .delete()\r\n      .then((res) => {\r\n        console.log(\"deleted successfully\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Grid item xs={12} className={classes.root}>\r\n      {deleteModal ? (\r\n        <DeleteModal\r\n          msgId={msgId}\r\n          text={values.text}\r\n          postImg={postImg}\r\n          deleteMsg={deleteMsg}\r\n          handleModal={showDeleteModal}\r\n        />\r\n      ) : null}\r\n      <div\r\n        className={classes.paper}\r\n        onMouseEnter={(e) => {\r\n          setStyle({ display: \"block\" });\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          setStyle({ display: \"none\" });\r\n        }}\r\n      >\r\n        <div className={classes.avatar}>\r\n          <Avatar\r\n            alt={values.userName}\r\n            src={values.userImg}\r\n            className={classes.purple}\r\n          />\r\n        </div>\r\n\r\n        <div className={classes.chat}>\r\n          <div>\r\n            <h6 className={classes.chatHeading}>{values.userName}</h6>\r\n            <p className={classes.chatTimming}>{time}</p>\r\n          </div>\r\n\r\n          <div className={classes.chatText}>\r\n            {values.text.split(\"\\n\").map((txt, idx) => (\r\n              <div key={idx}>\r\n                <Anchorme target=\"_blank\" rel=\"noreferrer noopener\">\r\n                  {txt}\r\n                </Anchorme>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <Grid item xs={12} md={12} style={{ paddingTop: \"5px\" }}>\r\n            {postImg ? (\r\n              <img\r\n                src={postImg}\r\n                alt=\"user\"\r\n                style={{ height: \"30vh\", width: \"auto\", borderRadius: \"4px\" }}\r\n              />\r\n            ) : null}\r\n          </Grid>\r\n\r\n          <div style={{ paddingTop: \"5px\", display: \"flex\" }}>\r\n            {numLikes > 0 ? (\r\n              <div style={{ padding: \"3px\" }}>\r\n                <IconButton\r\n                  component=\"span\"\r\n                  onClick={likeClick}\r\n                  className={classes.countEmojiBtn}\r\n                  style={selectedLike}\r\n                >\r\n                  <AiFillLike />\r\n                  <div style={{ paddingLeft: \"2px\" }}>{numLikes}</div>\r\n                </IconButton>\r\n              </div>\r\n            ) : null}\r\n\r\n            {numFire > 0 ? (\r\n              <div style={{ padding: \"3px\" }}>\r\n                <IconButton\r\n                  component=\"span\"\r\n                  onClick={fireClick}\r\n                  className={classes.countEmojiBtn}\r\n                  style={selectedFire}\r\n                >\r\n                  <AiFillFire />\r\n                  <div style={{ paddingLeft: \"2px\" }}>{numFire}</div>\r\n                </IconButton>\r\n              </div>\r\n            ) : null}\r\n\r\n            {numHeart > 0 ? (\r\n              <div style={{ padding: \"3px\" }}>\r\n                <IconButton\r\n                  component=\"span\"\r\n                  onClick={heartClick}\r\n                  className={classes.countEmojiBtn}\r\n                  style={selectedHeart}\r\n                >\r\n                  <AiFillHeart />\r\n                  <div style={{ paddingLeft: \"2px\" }}>{numHeart}</div>\r\n                </IconButton>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={classes.emojiDiv} style={style}>\r\n          <div className={classes.emojiDivInner}>\r\n            <div className={classes.allEmoji}>\r\n              <IconButton\r\n                component=\"span\"\r\n                style={{ padding: \"4px\" }}\r\n                onClick={likeClick}\r\n              >\r\n                <AiFillLike className={classes.emojiBtn} />\r\n              </IconButton>\r\n              <IconButton\r\n                component=\"span\"\r\n                style={{ padding: \"4px\" }}\r\n                onClick={fireClick}\r\n              >\r\n                <AiFillFire className={classes.emojiBtn} />\r\n              </IconButton>\r\n              <IconButton\r\n                component=\"span\"\r\n                style={{ padding: \"4px\" }}\r\n                onClick={heartClick}\r\n              >\r\n                <AiFillHeart className={classes.emojiBtn} />\r\n              </IconButton>\r\n              {uid === messegerUid ? (\r\n                <IconButton\r\n                  component=\"span\"\r\n                  style={{ padding: \"4px\" }}\r\n                  onClick={showDeleteModal}\r\n                >\r\n                  <AiFillDelete\r\n                    className={classes.emojiBtn}\r\n                    color=\"#c3c3c3f0\"\r\n                  />\r\n                </IconButton>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default Messages;\r\n"]},"metadata":{},"sourceType":"module"}